# Implementation Plan

- [x] 1. 프로젝트 기본 구조 및 환경 설정



  - Streamlit 프로젝트 초기화 및 디렉토리 구조 생성
  - 필요한 Python 패키지 설치 (streamlit, requests, pillow, python-dotenv 등)
  - 환경 변수 설정 파일 (.env) 및 API 키 관리 구조 생성
  - _Requirements: 1.1, 10.4, 11.4_

- [ ] 2. 데이터 모델 및 기본 클래스 구현
  - Novel, Character, Scene 데이터 클래스 정의
  - UUID 생성 및 날짜 처리 유틸리티 함수 구현
  - 데이터 검증 및 직렬화 메서드 구현
  - _Requirements: 1.3, 8.1, 8.2_




- [ ] 3. 파일 시스템 기반 데이터 관리자 구현
  - DataManager 클래스의 기본 CRUD 작업 구현



  - JSON 파일 읽기/쓰기 및 디렉토리 관리 기능
  - 이미지 파일 저장 및 불러오기 기능 구현
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 4. 제미나이 API 클라이언트 구현



  - GeminiClient 클래스 기본 구조 및 API 호출 메서드
  - 대본에서 등장인물 추출 기능 구현
  - 대본을 장면으로 분리하는 기능 구현
  - 장면 이미지 프롬프트 자동 생성 기능 구현
  - _Requirements: 11.1, 11.2, 11.3, 12.1_

- [x] 5. 나노바나나 API 클라이언트 구현


  - NovaNanaClient 클래스 기본 구조 및 API 호출 메서드
  - 등장인물 기준 이미지 생성 기능 구현
  - 장면 이미지 생성 기능 (기준 이미지 활용) 구현
  - 이미지 압축 및 최적화 기능 구현
  - _Requirements: 10.1, 10.3, 12.2, 12.4_




- [ ] 6. 자동화 워크플로우 엔진 구현
  - NovelWorkflow 클래스 기본 구조 구현
  - 등장인물 추출 및 이미지 생성 워크플로우 구현
  - 장면 분리 및 이미지 생성 워크플로우 구현
  - 진행 상황 추적 및 오류 처리 메커니즘 구현
  - _Requirements: 12.1, 12.2, 12.3, 12.4_

- [ ] 7. Streamlit 메인 애플리케이션 구조 구현
  - 메인 앱 진입점 및 페이지 설정 구현
  - 세션 상태 초기화 및 관리 시스템 구현
  - 사이드바 네비게이션 및 소설 선택 UI 구현
  - _Requirements: 8.1, 8.2_

- [ ] 8. 소설 생성 및 대본 입력 UI 구현
  - 새 소설 생성 폼 (제목, 대본 입력) 구현
  - 대본 텍스트 에디터 및 저장 기능 구현
  - 자동화 워크플로우 실행 버튼 및 진행 상황 표시 구현
  - _Requirements: 1.1, 1.2, 12.1_

- [ ] 9. 등장인물 관리 UI 구현
  - 등장인물 목록 표시 및 카드 형태 UI 구현
  - 등장인물 상세 정보 편집 폼 구현
  - 등장인물 이미지 표시 및 재생성 기능 구현
  - 등장인물 개별 내보내기/가져오기 기능 구현
  - _Requirements: 3.2, 4.1, 8.1, 8.3_

- [ ] 10. 장면 관리 UI 구현
  - 장면 목록 표시 및 편집 인터페이스 구현
  - 장면 상세 편집 폼 (제목, 지문, 대사, 캐스팅 등) 구현
  - 장면 이미지 표시 및 재생성 기능 구현
  - 장면 개별 내보내기/가져오기 기능 구현
  - _Requirements: 3.1, 4.2, 13.1, 13.3_

- [ ] 11. 파일 저장 및 불러오기 기능 구현
  - 개별 소설 JSON 파일 내보내기 기능 구현
  - 소설 파일 불러오기 및 데이터 복원 기능 구현
  - 파일 형식 검증 및 오류 처리 구현
  - 중복 소설명 처리 및 사용자 선택 옵션 구현
  - _Requirements: 1.1, 1.2, 2.1, 2.5, 2.6_

- [ ] 12. 전체 라이브러리 백업 및 복원 기능 구현
  - 모든 소설 데이터를 압축 파일로 백업하는 기능 구현
  - 백업 파일에서 데이터 복원 기능 구현
  - 백업/복원 시 진행 상황 표시 및 통계 정보 제공
  - 데이터 병합/덮어쓰기 옵션 구현
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [ ] 13. 이미지 다운로드 및 관리 기능 구현
  - 개별 이미지 우클릭 다운로드 기능 구현
  - 의미있는 파일명 자동 생성 시스템 구현
  - 이미지 압축 및 품질 최적화 기능 구현
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 14. 소설 간 데이터 복사/이동 기능 구현
  - 등장인물을 다른 소설로 복사하는 기능 구현
  - 장면을 다른 소설로 이동하는 기능 구현
  - 중복 이름 처리 및 사용자 선택 옵션 구현
  - 캐스팅 정보 자동 조정 기능 구현
  - _Requirements: 9.1, 9.2, 9.3, 9.4_

- [ ] 15. API 오류 처리 및 대안 시스템 구현
  - 제미나이 API 오류 시 기본 템플릿 사용 기능 구현
  - 나노바나나 API 오류 시 재시도 메커니즘 구현
  - 네트워크 오류 및 API 한도 초과 처리 구현
  - 사용자 친화적 오류 메시지 및 해결 방안 제시
  - _Requirements: 10.2, 11.4_

- [ ] 16. 성능 최적화 및 캐싱 구현
  - Streamlit 캐싱을 활용한 데이터 로딩 최적화
  - 이미지 지연 로딩 및 메모리 사용량 최적화
  - API 클라이언트 인스턴스 캐싱 구현
  - 대용량 파일 처리 시 스트리밍 방식 적용
  - _Requirements: 7.1, 7.2, 7.3_

- [ ] 17. 사용자 경험 개선 및 UI 폴리싱
  - 로딩 스피너 및 진행률 표시기 구현
  - 사용자 가이드 및 도움말 시스템 구현
  - 반응형 레이아웃 및 모바일 최적화
  - 키보드 단축키 및 접근성 기능 구현

- [ ] 18. 테스트 및 검증 시스템 구현
  - 단위 테스트 (데이터 모델, API 클라이언트) 작성
  - 통합 테스트 (전체 워크플로우) 작성
  - 파일 I/O 및 데이터 무결성 테스트 작성
  - 사용자 시나리오 기반 E2E 테스트 작성

- [ ] 19. 배포 준비 및 문서화
  - requirements.txt 및 환경 설정 가이드 작성
  - README.md 및 사용자 매뉴얼 작성
  - Docker 컨테이너화 (선택사항) 구현
  - 배포 스크립트 및 설정 파일 작성

- [ ] 20. 최종 통합 테스트 및 버그 수정
  - 전체 시스템 통합 테스트 실행
  - 발견된 버그 및 이슈 수정
  - 성능 프로파일링 및 최적화
  - 사용자 피드백 반영 및 최종 조정